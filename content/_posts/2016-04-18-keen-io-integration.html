---
layout: post
title:  "Keen.io integration"
date:   2016-07-18 12:31:11
categories: jekyll ci iot
---

<h1>Was es nicht alles giebt ..</h1>

<div id="chart"></div>


<script>
$( document ).ready(function() {
	
	  var client = new Keen({
	      projectId: "{{ site.keen_projectId }}",
	      readKey: "{{ site.keen_api_readKey }}"
	  });	
	
Keen.ready(function(){
    var el = document.getElementById("chart");
    var chart = new Keen.Dataviz()
        .el(el)
        .chartType('barChart')
        .height(400)
        .prepare();

    client.run('jekyll-site-ci-avarage-build-duration', function(err, res){
       chart
           .parseRequest(this)
           .call(function(){
               var ds, df, line;
               ds = new google.visualization.arrayToDataTable(this.data());
               
               // Create and apply a formatter
               df = new google.visualization.DateFormat({
                   formatType: 'long', 
                   timeZone: -4
               });
               df.format(ds, 0);
               var options = {
            	        title: 'Jekyll Site Ci Avarage Build Duration',
            	        hAxis: {
            	          title: 'Avarage Build Duration',
            	          minValue: 0
            	        },
            	        vAxis: {
            	          title: 'Ci System'
            	        }
            	      };
               line = new google.visualization.BarChart(this.el());
               line.draw(ds,options);
           });
    });
});  
});
</script>
